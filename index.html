<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J√±ƒÅnayoni - Village Library</title>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1"
        }
    }
    </script>

    <style>
        /* Global Reset to ensure styles look right immediately */
        body { margin: 0; padding: 0; background: #1a1a2e; color: white; font-family: sans-serif; }
        /* Loading state */
        #root:empty::before { content: 'Loading Library System...'; display: block; padding: 20px; text-align: center; color: #4ecdc4; }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel" data-type="module">
    import React, { useState, useEffect, useRef } from 'react';
    import { createRoot } from 'react-dom/client';
    import { Camera, Book, Users, Upload, Bell, Calendar, FileText, Home, LogOut, Menu, X, BookOpen, Clock, AlertCircle, Check, QrCode, Image as ImageIcon, Mail, Phone, MapPin, Settings } from 'lucide-react';

    // ----------------------------------------------------------------------
    // POLYFILLS (Making it work in the browser without a backend)
    // ----------------------------------------------------------------------
    
    // Simulating the window.storage object using LocalStorage
    window.storage = {
        get: async (key) => {
            const val = localStorage.getItem(key);
            return val ? { value: val } : null;
        },
        set: async (key, value) => {
            localStorage.setItem(key, value);
            return true;
        }
    };

    // ----------------------------------------------------------------------
    // ORIGINAL APP CODE (Adapted)
    // ----------------------------------------------------------------------

    // Translations
    const translations = {
      en: {
        appName: "J√±ƒÅnayoni",
        tagline: "Knowledge Repository",
        selectLanguage: "Select Language",
        libraryLogin: "Library Society Login",
        readerLogin: "Reader Login",
        login: "Login",
        email: "Email",
        password: "Password",
        selectLibrary: "Select Your Library",
        dashboard: "Dashboard",
        issuedBooks: "Issued Books",
        availableBooks: "Available Online Books",
        history: "Past Issued Books",
        issueBook: "Issue Book",
        scanQR: "Scan Book QR Code",
        notifications: "Notifications",
        about: "About",
        contact: "Contact",
        logout: "Logout",
        todaysEpaper: "Today's E-Paper",
        uploadEpaper: "Upload Today's E-Paper",
        uploadBooks: "Upload PDF Books",
        issuedRecords: "Issued Books Records",
        enrolledStudents: "Enrolled Students",
        updateAbout: "Update About Section",
        uploadPhotos: "Upload Library Photos",
        updateContact: "Update Contact Info",
        pendingFines: "Pending Fines",
        currentIssued: "Currently Issued",
        overdueBooks: "Overdue Books",
        dueDate: "Due Date",
        fine: "Fine",
        returnDate: "Return Date",
        studentName: "Student Name",
        bookTitle: "Book Title",
        issueDate: "Issue Date",
        status: "Status",
        save: "Save",
        upload: "Upload",
        cancel: "Cancel",
        submit: "Submit",
        viewAll: "View All",
        noBooks: "No books available",
        success: "Success!",
        bookIssued: "Book issued successfully",
        loading: "Loading...",
        welcome: "Welcome",
        libraryInfo: "Library Information",
        address: "Address",
        phone: "Phone",
        email: "Email",
        hours: "Operating Hours",
      },
      mr: {
        appName: "‡§ú‡•ç‡§û‡§æ‡§®‡§Ø‡•ã‡§®‡•Ä",
        tagline: "‡§ú‡•ç‡§û‡§æ‡§® ‡§≠‡§æ‡§Ç‡§°‡§æ‡§∞",
        selectLanguage: "‡§≠‡§æ‡§∑‡§æ ‡§®‡§ø‡§µ‡§°‡§æ",
        libraryLogin: "‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø ‡§∏‡•ã‡§∏‡§æ‡§Ø‡§ü‡•Ä ‡§≤‡•â‡§ó‡§ø‡§®",
        readerLogin: "‡§µ‡§æ‡§ö‡§ï ‡§≤‡•â‡§ó‡§ø‡§®",
        login: "‡§≤‡•â‡§ó‡§ø‡§®",
        email: "‡§à‡§Æ‡•á‡§≤",
        password: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°",
        selectLibrary: "‡§§‡•Å‡§Æ‡§ö‡•á ‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø ‡§®‡§ø‡§µ‡§°‡§æ",
        dashboard: "‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
        issuedBooks: "‡§ú‡§æ‡§∞‡•Ä ‡§ï‡•á‡§≤‡•á‡§≤‡•Ä ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á",
        availableBooks: "‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á",
        history: "‡§Æ‡§æ‡§ó‡•Ä‡§≤ ‡§ú‡§æ‡§∞‡•Ä ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á",
        issueBook: "‡§™‡•Å‡§∏‡•ç‡§§‡§ï ‡§ú‡§æ‡§∞‡•Ä ‡§ï‡§∞‡§æ",
        scanQR: "‡§™‡•Å‡§∏‡•ç‡§§‡§ï QR ‡§ï‡•ã‡§° ‡§∏‡•ç‡§ï‡•Ö‡§® ‡§ï‡§∞‡§æ",
        notifications: "‡§∏‡•Ç‡§ö‡§®‡§æ",
        about: "‡§¨‡§¶‡•ç‡§¶‡§≤",
        contact: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï",
        logout: "‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü",
        todaysEpaper: "‡§Ü‡§ú‡§ö‡•á ‡§à-‡§™‡•á‡§™‡§∞",
        uploadEpaper: "‡§Ü‡§ú‡§ö‡•á ‡§à-‡§™‡•á‡§™‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ",
        uploadBooks: "PDF ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ",
        issuedRecords: "‡§ú‡§æ‡§∞‡•Ä ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§Ç‡§ö‡•á ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°",
        enrolledStudents: "‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä‡§ï‡•É‡§§ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä",
        updateAbout: "‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§µ‡§ø‡§≠‡§æ‡§ó ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§æ",
        uploadPhotos: "‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§æ",
        updateContact: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§æ",
        pendingFines: "‡§™‡•ç‡§∞‡§≤‡§Ç‡§¨‡§ø‡§§ ‡§¶‡§Ç‡§°",
        currentIssued: "‡§∏‡§ß‡•ç‡§Ø‡§æ ‡§ú‡§æ‡§∞‡•Ä",
        overdueBooks: "‡§Æ‡•Å‡§¶‡§§‡§¨‡§æ‡§π‡•ç‡§Ø ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á",
        dueDate: "‡§¶‡•á‡§Ø ‡§§‡§æ‡§∞‡•Ä‡§ñ",
        fine: "‡§¶‡§Ç‡§°",
        returnDate: "‡§™‡§∞‡§§‡•Ä‡§ö‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ",
        studentName: "‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§ö‡•á ‡§®‡§æ‡§µ",
        bookTitle: "‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§ö‡•á ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï",
        issueDate: "‡§ú‡§æ‡§∞‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ",
        status: "‡§∏‡•ç‡§•‡§ø‡§§‡•Ä",
        save: "‡§ú‡§§‡§® ‡§ï‡§∞‡§æ",
        upload: "‡§Ö‡§™‡§≤‡•ã‡§°",
        cancel: "‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡§æ",
        submit: "‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§æ",
        viewAll: "‡§∏‡§∞‡•ç‡§µ ‡§™‡§π‡§æ",
        noBooks: "‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä‡§§",
        success: "‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä!",
        bookIssued: "‡§™‡•Å‡§∏‡•ç‡§§‡§ï ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä‡§∞‡§ø‡§§‡•ç‡§Ø‡§æ ‡§ú‡§æ‡§∞‡•Ä ‡§ï‡•á‡§≤‡•á",
        loading: "‡§≤‡•ã‡§° ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...",
        welcome: "‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á",
        libraryInfo: "‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä",
        address: "‡§™‡§§‡•ç‡§§‡§æ",
        phone: "‡§´‡•ã‡§®",
        email: "‡§à‡§Æ‡•á‡§≤",
        hours: "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø‡•Ä‡§® ‡§µ‡•á‡§≥",
      }
    };

    // Main App Component
    function JnanayoniLibrary() {
      const [language, setLanguage] = useState(null);
      const [userType, setUserType] = useState(null);
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [selectedLibrary, setSelectedLibrary] = useState(null);
      const [currentView, setCurrentView] = useState('home');
      const [showMobileMenu, setShowMobileMenu] = useState(false);
      const [userData, setUserData] = useState(null);
      const [notification, setNotification] = useState(null);

      const t = language ? translations[language] : translations.en;

      useEffect(() => {
        loadUserData();
        loadNotifications();
      }, [isLoggedIn]);

      const loadUserData = async () => {
        if (!isLoggedIn) return;
        try {
          const result = await window.storage.get(`user_${userType}_data`);
          if (result) {
            setUserData(JSON.parse(result.value));
          }
        } catch (error) {
          console.log('No user data found');
        }
      };

      const loadNotifications = async () => {
        try {
          const result = await window.storage.get('notifications', true);
          if (result) {
            setNotification(JSON.parse(result.value));
          }
        } catch (error) {
          console.log('No notifications');
        }
      };

      const showNotification = (message) => {
        setNotification(message);
        setTimeout(() => setNotification(null), 3000);
      };

      // Language Selection Screen
      if (!language) {
        return <LanguageSelection onSelect={setLanguage} />;
      }

      // Login Selection Screen
      if (!userType) {
        return <LoginTypeSelection t={t} onSelect={setUserType} />;
      }

      // Login Screen
      if (!isLoggedIn) {
        return (
          <LoginScreen
            t={t}
            userType={userType}
            onLogin={(library) => {
              setIsLoggedIn(true);
              setSelectedLibrary(library);
            }}
            onBack={() => setUserType(null)}
          />
        );
      }

      // Main App
      return (
        <div className="app-container">
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
          
          <Header
            t={t}
            userType={userType}
            showMobileMenu={showMobileMenu}
            setShowMobileMenu={setShowMobileMenu}
            onLogout={() => {
              setIsLoggedIn(false);
              setUserType(null);
              setSelectedLibrary(null);
              setCurrentView('home');
            }}
          />

          <div className="main-layout">
            <Sidebar
              t={t}
              userType={userType}
              currentView={currentView}
              setCurrentView={setCurrentView}
              showMobileMenu={showMobileMenu}
              setShowMobileMenu={setShowMobileMenu}
            />

            <main className="content-area">
              {notification && (
                <div className="notification-banner">
                  <Check size={20} />
                  <span>{notification}</span>
                </div>
              )}

              {userType === 'reader' ? (
                <ReaderContent
                  t={t}
                  currentView={currentView}
                  selectedLibrary={selectedLibrary}
                  showNotification={showNotification}
                />
              ) : (
                <LibraryContent
                  t={t}
                  currentView={currentView}
                  showNotification={showNotification}
                />
              )}
            </main>
          </div>

          <style dangerouslySetInnerHTML={{__html: `
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }

            .app-container {
              min-height: 100vh;
              background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
              color: #fff;
              font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            }

            .main-layout {
              display: flex;
              min-height: calc(100vh - 70px);
            }

            .content-area {
              flex: 1;
              padding: 1.5rem;
              overflow-y: auto;
              animation: fadeIn 0.4s ease;
            }

            @keyframes fadeIn {
              from { opacity: 0; transform: translateY(10px); }
              to { opacity: 1; transform: translateY(0); }
            }

            .notification-banner {
              position: fixed;
              top: 90px;
              right: 20px;
              background: linear-gradient(135deg, #00d4aa 0%, #00a87e 100%);
              color: white;
              padding: 1rem 1.5rem;
              border-radius: 12px;
              display: flex;
              align-items: center;
              gap: 0.75rem;
              box-shadow: 0 8px 32px rgba(0, 212, 170, 0.4);
              animation: slideInRight 0.3s ease, fadeOut 0.3s ease 2.7s;
              z-index: 1000;
              font-weight: 500;
            }

            @keyframes slideInRight {
              from { transform: translateX(400px); opacity: 0; }
              to { transform: translateX(0); opacity: 1; }
            }

            @keyframes fadeOut {
              to { opacity: 0; }
            }

            @media (max-width: 768px) {
              .content-area {
                padding: 1rem;
              }

              .notification-banner {
                top: 80px;
                right: 10px;
                left: 10px;
                padding: 0.875rem 1rem;
                font-size: 0.875rem;
              }
            }
          `}} />
        </div>
      );
    }

    // Language Selection Component
    function LanguageSelection({ onSelect }) {
      return (
        <div className="lang-container">
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
          
          <div className="lang-card">
            <div className="lang-header">
              <BookOpen size={48} className="header-icon" />
              <h1>J√±ƒÅnayoni</h1>
              <p>‡§ú‡•ç‡§û‡§æ‡§®‡§Ø‡•ã‡§®‡•Ä</p>
              <span className="tagline">Knowledge Repository ‚Ä¢ ‡§ú‡•ç‡§û‡§æ‡§® ‡§≠‡§æ‡§Ç‡§°‡§æ‡§∞</span>
            </div>

            <h2>Select Language / ‡§≠‡§æ‡§∑‡§æ ‡§®‡§ø‡§µ‡§°‡§æ</h2>

            <div className="lang-buttons">
              <button onClick={() => onSelect('en')} className="lang-btn">
                <span className="lang-flag">üá¨üáß</span>
                <span>English</span>
              </button>
              <button onClick={() => onSelect('mr')} className="lang-btn">
                <span className="lang-flag">üáÆüá≥</span>
                <span>‡§Æ‡§∞‡§æ‡§†‡•Ä</span>
              </button>
            </div>
          </div>

          <style dangerouslySetInnerHTML={{__html: `
            .lang-container {
              min-height: 100vh;
              background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 1rem;
              position: relative;
              overflow: hidden;
            }

            .lang-container::before {
              content: '';
              position: absolute;
              width: 500px;
              height: 500px;
              background: radial-gradient(circle, rgba(255, 107, 107, 0.1) 0%, transparent 70%);
              top: -100px;
              right: -100px;
              animation: pulse 4s ease-in-out infinite;
            }

            .lang-container::after {
              content: '';
              position: absolute;
              width: 400px;
              height: 400px;
              background: radial-gradient(circle, rgba(78, 205, 196, 0.1) 0%, transparent 70%);
              bottom: -50px;
              left: -50px;
              animation: pulse 4s ease-in-out infinite 2s;
            }

            @keyframes pulse {
              0%, 100% { transform: scale(1); opacity: 0.5; }
              50% { transform: scale(1.1); opacity: 0.8; }
            }

            .lang-card {
              background: rgba(255, 255, 255, 0.05);
              backdrop-filter: blur(20px);
              border: 1px solid rgba(255, 255, 255, 0.1);
              border-radius: 24px;
              padding: 3rem 2.5rem;
              max-width: 480px;
              width: 100%;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
              animation: slideUp 0.6s ease;
              position: relative;
              z-index: 1;
            }

            @keyframes slideUp {
              from { transform: translateY(30px); opacity: 0; }
              to { transform: translateY(0); opacity: 1; }
            }

            .lang-header {
              text-align: center;
              margin-bottom: 2.5rem;
            }

            .header-icon {
              color: #ff6b6b;
              margin-bottom: 1rem;
              animation: float 3s ease-in-out infinite;
            }

            @keyframes float {
              0%, 100% { transform: translateY(0); }
              50% { transform: translateY(-10px); }
            }

            .lang-header h1 {
              font-size: 2.5rem;
              font-weight: 700;
              background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              background-clip: text;
              margin-bottom: 0.5rem;
              letter-spacing: 1px;
            }

            .lang-header p {
              font-size: 1.75rem;
              color: #4ecdc4;
              font-weight: 600;
              margin-bottom: 0.5rem;
            }

            .tagline {
              font-size: 0.875rem;
              color: rgba(255, 255, 255, 0.6);
              font-weight: 400;
            }

            .lang-card h2 {
              text-align: center;
              font-size: 1.25rem;
              color: rgba(255, 255, 255, 0.9);
              margin-bottom: 2rem;
              font-weight: 500;
            }

            .lang-buttons {
              display: flex;
              flex-direction: column;
              gap: 1rem;
            }

            .lang-btn {
              background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(78, 205, 196, 0.2) 100%);
              border: 2px solid rgba(255, 255, 255, 0.2);
              color: white;
              padding: 1.25rem;
              border-radius: 16px;
              font-size: 1.25rem;
              font-weight: 600;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 1rem;
              transition: all 0.3s ease;
              font-family: 'Poppins', sans-serif;
            }

            .lang-btn:hover {
              transform: translateY(-3px);
              box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
              border-color: rgba(255, 255, 255, 0.4);
              background: linear-gradient(135deg, rgba(255, 107, 107, 0.3) 0%, rgba(78, 205, 196, 0.3) 100%);
            }

            .lang-btn:active {
              transform: translateY(0);
            }

            .lang-flag {
              font-size: 2rem;
            }

            @media (max-width: 480px) {
              .lang-card {
                padding: 2rem 1.5rem;
              }

              .lang-header h1 {
                font-size: 2rem;
              }

              .lang-header p {
                font-size: 1.5rem;
              }

              .lang-btn {
                padding: 1rem;
                font-size: 1.125rem;
              }
            }
          `}} />
        </div>
      );
    }

    // Login Type Selection Component
    function LoginTypeSelection({ t, onSelect }) {
      return (
        <div className="login-type-container">
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
          
          <div className="login-type-card">
            <h1>{t.appName}</h1>
            <p className="subtitle">{t.tagline}</p>

            <div className="login-type-buttons">
              <button onClick={() => onSelect('library')} className="type-btn library-btn">
                <Users size={40} />
                <span>{t.libraryLogin}</span>
              </button>
              <button onClick={() => onSelect('reader')} className="type-btn reader-btn">
                <Book size={40} />
                <span>{t.readerLogin}</span>
              </button>
            </div>
          </div>

          <style dangerouslySetInnerHTML={{__html: `
            .login-type-container {
              min-height: 100vh;
              background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 1rem;
            }

            .login-type-card {
              background: rgba(255, 255, 255, 0.05);
              backdrop-filter: blur(20px);
              border: 1px solid rgba(255, 255, 255, 0.1);
              border-radius: 24px;
              padding: 3rem 2.5rem;
              max-width: 500px;
              width: 100%;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
              animation: slideUp 0.6s ease;
            }

            @keyframes slideUp {
              from { transform: translateY(30px); opacity: 0; }
              to { transform: translateY(0); opacity: 1; }
            }

            .login-type-card h1 {
              text-align: center;
              font-size: 2.5rem;
              font-weight: 700;
              background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              background-clip: text;
              margin-bottom: 0.5rem;
            }

            .subtitle {
              text-align: center;
              color: rgba(255, 255, 255, 0.7);
              font-size: 1rem;
              margin-bottom: 3rem;
            }

            .login-type-buttons {
              display: flex;
              flex-direction: column;
              gap: 1.5rem;
            }

            .type-btn {
              background: rgba(255, 255, 255, 0.08);
              border: 2px solid rgba(255, 255, 255, 0.15);
              color: white;
              padding: 2rem;
              border-radius: 20px;
              font-size: 1.25rem;
              font-weight: 600;
              cursor: pointer;
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 1rem;
              transition: all 0.3s ease;
              font-family: 'Poppins', sans-serif;
            }

            .type-btn:hover {
              transform: translateY(-5px);
              box-shadow: 0 15px 40px rgba(78, 205, 196, 0.3);
              border-color: rgba(78, 205, 196, 0.5);
            }

            .library-btn:hover {
              background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(254, 202, 87, 0.2) 100%);
            }

            .reader-btn:hover {
              background: linear-gradient(135deg, rgba(78, 205, 196, 0.2) 0%, rgba(68, 160, 141, 0.2) 100%);
            }

            @media (max-width: 480px) {
              .login-type-card {
                padding: 2rem 1.5rem;
              }

              .login-type-card h1 {
                font-size: 2rem;
              }

              .type-btn {
                padding: 1.5rem;
              }
            }
          `}} />
        </div>
      );
    }

    // Login Screen Component
    function LoginScreen({ t, userType, onLogin, onBack }) {
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');
      const [selectedLibrary, setSelectedLibrary] = useState('');

      // Sample libraries
      const libraries = [
        { id: 'lib1', name: 'Mumbai Central Library', nameMarathi: '‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§Æ‡§ß‡•ç‡§Ø‡§µ‡§∞‡•ç‡§§‡•Ä ‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø' },
        { id: 'lib2', name: 'Pune Knowledge Hub', nameMarathi: '‡§™‡•Å‡§£‡•á ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞' },
        { id: 'lib3', name: 'Nashik Public Library', nameMarathi: '‡§®‡§æ‡§∂‡§ø‡§ï ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø' },
      ];

      const handleLogin = () => {
        if (userType === 'reader' && !selectedLibrary) {
          alert('Please select a library');
          return;
        }
        onLogin(userType === 'reader' ? selectedLibrary : null);
      };

      return (
        <div className="login-container">
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
          
          <button onClick={onBack} className="back-btn">
            ‚Üê {t.cancel}
          </button>

          <div className="login-card">
            <h2>{userType === 'library' ? t.libraryLogin : t.readerLogin}</h2>

            {userType === 'reader' && (
              <div className="form-group">
                <label>{t.selectLibrary}</label>
                <select
                  value={selectedLibrary}
                  onChange={(e) => setSelectedLibrary(e.target.value)}
                  className="form-control"
                >
                  <option value="">{t.selectLibrary}</option>
                  {libraries.map(lib => (
                    <option key={lib.id} value={lib.id}>
                      {lib.name} ‚Ä¢ {lib.nameMarathi}
                    </option>
                  ))}
                </select>
              </div>
            )}

            <div className="form-group">
              <label>{t.email}</label>
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="form-control"
                placeholder={t.email}
              />
            </div>

            <div className="form-group">
              <label>{t.password}</label>
              <input
                type="password"
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                className="form-control"
                placeholder={t.password}
              />
            </div>

            <button onClick={handleLogin} className="login-btn">
              {t.login}
            </button>
          </div>

          <style dangerouslySetInnerHTML={{__html: `
            .login-container {
              min-height: 100vh;
              background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 1rem;
              position: relative;
            }

            .back-btn {
              position: absolute;
              top: 20px;
              left: 20px;
              background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.2);
              color: white;
              padding: 0.75rem 1.5rem;
              border-radius: 12px;
              cursor: pointer;
              font-size: 1rem;
              font-weight: 500;
              transition: all 0.3s ease;
              font-family: 'Poppins', sans-serif;
            }

            .back-btn:hover {
              background: rgba(255, 255, 255, 0.15);
              transform: translateX(-3px);
            }

            .login-card {
              background: rgba(255, 255, 255, 0.05);
              backdrop-filter: blur(20px);
              border: 1px solid rgba(255, 255, 255, 0.1);
              border-radius: 24px;
              padding: 3rem 2.5rem;
              max-width: 450px;
              width: 100%;
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
              animation: slideUp 0.6s ease;
            }

            @keyframes slideUp {
              from { transform: translateY(30px); opacity: 0; }
              to { transform: translateY(0); opacity: 1; }
            }

            .login-card h2 {
              text-align: center;
              font-size: 1.75rem;
              color: #4ecdc4;
              margin-bottom: 2rem;
              font-weight: 600;
            }

            .form-group {
              margin-bottom: 1.5rem;
            }

            .form-group label {
              display: block;
              color: rgba(255, 255, 255, 0.8);
              margin-bottom: 0.5rem;
              font-weight: 500;
              font-size: 0.875rem;
            }

            .form-control {
              width: 100%;
              padding: 0.875rem 1rem;
              background: rgba(255, 255, 255, 0.05);
              border: 1px solid rgba(255, 255, 255, 0.15);
              border-radius: 12px;
              color: white;
              font-size: 1rem;
              font-family: 'Poppins', sans-serif;
              transition: all 0.3s ease;
            }

            .form-control:focus {
              outline: none;
              border-color: #4ecdc4;
              background: rgba(255, 255, 255, 0.08);
            }

            .form-control option {
              background: #1a1a2e;
              color: white;
            }

            .login-btn {
              width: 100%;
              padding: 1rem;
              background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
              border: none;
              border-radius: 12px;
              color: white;
              font-size: 1.125rem;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              margin-top: 1rem;
              font-family: 'Poppins', sans-serif;
            }

            .login-btn:hover {
              transform: translateY(-2px);
              box-shadow: 0 10px 30px rgba(78, 205, 196, 0.4);
            }

            @media (max-width: 480px) {
              .login-card {
                padding: 2rem 1.5rem;
              }

              .back-btn {
                top: 10px;
                left: 10px;
                padding: 0.625rem 1rem;
                font-size: 0.875rem;
              }
            }
          `}} />
        </div>
      );
    }

    // Header Component
    function Header({ t, userType, showMobileMenu, setShowMobileMenu, onLogout }) {
      return (
        <header className="header">
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
          
          <div className="header-content">
            <div className="header-left">
              <button
                className="mobile-menu-btn"
                onClick={() => setShowMobileMenu(!showMobileMenu)}
              >
                {showMobileMenu ? <X size={24} /> : <Menu size={24} />}
              </button>
              <div className="logo">
                <BookOpen size={28} />
                <span>{t.appName}</span>
              </div>
            </div>

            <div className="header-right">
              <button className="notification-btn">
                <Bell size={20} />
                <span className="notification-badge">3</span>
              </button>
              <button onClick={onLogout} className="logout-btn">
                <LogOut size={18} />
                <span>{t.logout}</span>
              </button>
            </div>
          </div>

          <style dangerouslySetInnerHTML={{__html: `
            .header {
              background: rgba(255, 255, 255, 0.05);
              backdrop-filter: blur(20px);
              border-bottom: 1px solid rgba(255, 255, 255, 0.1);
              padding: 1rem 1.5rem;
              position: sticky;
              top: 0;
              z-index: 100;
            }

            .header-content {
              display: flex;
              justify-content: space-between;
              align-items: center;
              max-width: 1400px;
              margin: 0 auto;
            }

            .header-left {
              display: flex;
              align-items: center;
              gap: 1rem;
            }

            .mobile-menu-btn {
              display: none;
              background: none;
              border: none;
              color: white;
              cursor: pointer;
              padding: 0.5rem;
              border-radius: 8px;
              transition: background 0.2s ease;
            }

            .mobile-menu-btn:hover {
              background: rgba(255, 255, 255, 0.1);
            }

            .logo {
              display: flex;
              align-items: center;
              gap: 0.75rem;
              font-size: 1.5rem;
              font-weight: 700;
              color: #4ecdc4;
            }

            .header-right {
              display: flex;
              align-items: center;
              gap: 1rem;
            }

            .notification-btn {
              position: relative;
              background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.15);
              color: white;
              padding: 0.625rem;
              border-radius: 10px;
              cursor: pointer;
              transition: all 0.2s ease;
              display: flex;
              align-items: center;
              justify-content: center;
            }

            .notification-btn:hover {
              background: rgba(255, 255, 255, 0.15);
            }

            .notification-badge {
              position: absolute;
              top: -5px;
              right: -5px;
              background: #ff6b6b;
              color: white;
              font-size: 0.625rem;
              font-weight: 700;
              padding: 0.125rem 0.375rem;
              border-radius: 10px;
              min-width: 18px;
              text-align: center;
            }

            .logout-btn {
              background: rgba(255, 107, 107, 0.2);
              border: 1px solid rgba(255, 107, 107, 0.3);
              color: white;
              padding: 0.625rem 1rem;
              border-radius: 10px;
              cursor: pointer;
              display: flex;
              align-items: center;
              gap: 0.5rem;
              font-weight: 500;
              font-size: 0.875rem;
              transition: all 0.2s ease;
              font-family: 'Poppins', sans-serif;
            }

            .logout-btn:hover {
              background: rgba(255, 107, 107, 0.3);
              transform: translateY(-1px);
            }

            @media (max-width: 768px) {
              .header {
                padding: 0.875rem 1rem;
              }

              .mobile-menu-btn {
                display: block;
              }

              .logo span {
                font-size: 1.25rem;
              }

              .logout-btn span {
                display: none;
              }

              .logout-btn {
                padding: 0.625rem;
              }
            }
          `}} />
        </header>
      );
    }

    // Sidebar Component
    function Sidebar({ t, userType, currentView, setCurrentView, showMobileMenu, setShowMobileMenu }) {
      const readerMenuItems = [
        { id: 'home', icon: Home, label: t.dashboard },
        { id: 'issued', icon: Book, label: t.issuedBooks },
        { id: 'available', icon: BookOpen, label: t.availableBooks },
        { id: 'history', icon: Clock, label: t.history },
        { id: 'issue', icon: QrCode, label: t.issueBook },
        { id: 'about', icon: FileText, label: t.about },
        { id: 'contact', icon: Mail, label: t.contact },
      ];

      const libraryMenuItems = [
        { id: 'home', icon: Home, label: t.dashboard },
        { id: 'epaper', icon: FileText, label: t.uploadEpaper },
        { id: 'books', icon: Upload, label: t.uploadBooks },
        { id: 'records', icon: Book, label: t.issuedRecords },
        { id: 'students', icon: Users, label: t.enrolledStudents },
        { id: 'about', icon: Settings, label: t.updateAbout },
        { id: 'photos', icon: ImageIcon, label: t.uploadPhotos },
        { id: 'contact', icon: Mail, label: t.updateContact },
      ];

      const menuItems = userType === 'reader' ? readerMenuItems : libraryMenuItems;

      return (
        <>
          <aside className={`sidebar ${showMobileMenu ? 'mobile-open' : ''}`}>
            <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
            
            <nav className="nav-menu">
              {menuItems.map(item => (
                <button
                  key={item.id}
                  className={`nav-item ${currentView === item.id ? 'active' : ''}`}
                  onClick={() => {
                    setCurrentView(item.id);
                    setShowMobileMenu(false);
                  }}
                >
                  <item.icon size={20} />
                  <span>{item.label}</span>
                </button>
              ))}
            </nav>
          </aside>

          {showMobileMenu && (
            <div className="sidebar-overlay" onClick={() => setShowMobileMenu(false)} />
          )}

          <style dangerouslySetInnerHTML={{__html: `
            .sidebar {
              width: 280px;
              background: rgba(255, 255, 255, 0.03);
              border-right: 1px solid rgba(255, 255, 255, 0.1);
              padding: 1.5rem 1rem;
              transition: transform 0.3s ease;
            }

            .nav-menu {
              display: flex;
              flex-direction: column;
              gap: 0.5rem;
            }

            .nav-item {
              background: transparent;
              border: none;
              color: rgba(255, 255, 255, 0.7);
              padding: 0.875rem 1rem;
              border-radius: 12px;
              cursor: pointer;
              display: flex;
              align-items: center;
              gap: 0.875rem;
              font-size: 0.9375rem;
              font-weight: 500;
              transition: all 0.2s ease;
              text-align: left;
              font-family: 'Poppins', sans-serif;
            }

            .nav-item:hover {
              background: rgba(255, 255, 255, 0.08);
              color: white;
              transform: translateX(3px);
            }

            .nav-item.active {
              background: linear-gradient(135deg, rgba(78, 205, 196, 0.2) 0%, rgba(68, 160, 141, 0.2) 100%);
              color: #4ecdc4;
              border-left: 3px solid #4ecdc4;
            }

            .sidebar-overlay {
              display: none;
            }

            @media (max-width: 768px) {
              .sidebar {
                position: fixed;
                top: 70px;
                left: 0;
                bottom: 0;
                z-index: 99;
                transform: translateX(-100%);
                background: rgba(26, 26, 46, 0.98);
                backdrop-filter: blur(20px);
              }
              
              .sidebar.mobile-open {
                transform: translateX(0);
              }

              .sidebar-overlay {
                display: block;
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 98;
              }
            }
          `}} />
        </>
      );
    }

    // Reader Content Component
    function ReaderContent({ t, currentView, selectedLibrary, showNotification }) {
      if (currentView === 'home') {
        return <ReaderDashboard t={t} selectedLibrary={selectedLibrary} />;
      }
      if (currentView === 'issued') {
        return <IssuedBooks t={t} />;
      }
      if (currentView === 'available') {
        return <AvailableBooks t={t} />;
      }
      if (currentView === 'history') {
        return <BooksHistory t={t} />;
      }
      if (currentView === 'issue') {
        return <IssueBook t={t} showNotification={showNotification} />;
      }
      if (currentView === 'about') {
        return <AboutSection t={t} />;
      }
      if (currentView === 'contact') {
        return <ContactSection t={t} />;
      }
      return null;
    }

    // Library Content Component
    function LibraryContent({ t, currentView, showNotification }) {
      if (currentView === 'home') {
        return <LibraryDashboard t={t} />;
      }
      if (currentView === 'epaper') {
        return <UploadEpaper t={t} showNotification={showNotification} />;
      }
      if (currentView === 'books') {
        return <UploadBooks t={t} showNotification={showNotification} />;
      }
      if (currentView === 'records') {
        return <IssuedRecords t={t} />;
      }
      if (currentView === 'students') {
        return <EnrolledStudents t={t} />;
      }
      if (currentView === 'about') {
        return <UpdateAbout t={t} showNotification={showNotification} />;
      }
      if (currentView === 'photos') {
        return <UploadPhotos t={t} showNotification={showNotification} />;
      }
      if (currentView === 'contact') {
        return <UpdateContact t={t} showNotification={showNotification} />;
      }
      return null;
    }

    // Reader Dashboard
    function ReaderDashboard({ t, selectedLibrary }) {
      const [stats, setStats] = useState({ issued: 3, available: 127, overdue: 1 });
      
      return (
        <div className="dashboard">
          <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
          
          <h1>{t.welcome}!</h1>
          <p className="subtitle">Mumbai Central Library ‚Ä¢ ‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§Æ‡§ß‡•ç‡§Ø‡§µ‡§∞‡•ç‡§§‡•Ä ‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø</p>

          <div className="stats-grid">
            <div className="stat-card blue">
              <div className="stat-icon">
                <Book size={32} />
              </div>
              <div className="stat-info">
                <h3>{stats.issued}</h3>
                <p>{t.currentIssued}</p>
              </div>
            </div>

            <div className="stat-card green">
              <div className="stat-icon">
                <BookOpen size={32} />
              </div>
              <div className="stat-info">
                <h3>{stats.available}</h3>
                <p>{t.availableBooks}</p>
              </div>
            </div>

            <div className="stat-card red">
              <div className="stat-icon">
                <AlertCircle size={32} />
              </div>
              <div className="stat-info">
                <h3>{stats.overdue}</h3>
                <p>{t.overdueBooks}</p>
              </div>
            </div>
          </div>

          <div className="recent-section">
            <h2>{t.todaysEpaper}</h2>
            <div className="epaper-card">
              <FileText size={48} />
              <h3>The Times of India - Feb 4, 2026</h3>
              <button className="primary-btn">View E-Paper</button>
            </div>
          </div>

          <style dangerouslySetInnerHTML={{__html: `
            .dashboard {
              animation: fadeIn 0.4s ease;
            }
            
            @keyframes fadeIn {
              from { opacity: 0; transform: translateY(10px); }
              to { opacity: 1; transform: translateY(0); }
            }

            h1 {
              font-size: 2rem;
              font-weight: 700;
              color: white;
              margin-bottom: 0.5rem;
            }

            .subtitle {
              color: rgba(255, 255, 255, 0.6);
              font-size: 1rem;
              margin-bottom: 2rem;
            }

            .stats-grid {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 1.5rem;
              margin-bottom: 2.5rem;
            }

            .stat-card {
              background: rgba(255, 255, 255, 0.05);
              backdrop-filter: blur(20px);
              border: 1px solid rgba(255, 255, 255, 0.1);
              border-radius: 16px;
              padding: 1.5rem;
              display: flex;
              align-items: center;
              gap: 1.25rem;
              transition: all 0.3s ease;
            }

            .stat-card:hover {
              transform: translateY(-5px);
              box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }

            .stat-card.blue { border-left: 4px solid #4ecdc4; }
            .stat-card.green { border-left: 4px solid #95e1d3; }
            .stat-card.red { border-left: 4px solid #ff6b6b; }

            .stat-icon {
              background: rgba(255, 255, 255, 0.1);
              padding: 1rem;
              border-radius: 12px;
              color: #4ecdc4;
            }

            .stat-info h3 {
              font-size: 2rem;
              font-weight: 700;
              color: white;
              margin-bottom: 0.25rem;
            }

            .stat-info p {
              color: rgba(255, 255, 255, 0.6);
              font-size: 0.875rem;
            }

            .recent-section {
              margin-top: 2.5rem;
            }

            .recent-section h2 {
              font-size: 1.5rem;
              color: white;
              margin-bottom: 1.5rem;
              font-weight: 600;
            }

            .epaper-card {
              background: linear-gradient(135deg, rgba(255, 107, 107, 0.1) 0%, rgba(254, 202, 87, 0.1) 100%);
              border: 1px solid rgba(255, 255, 255, 0.1);
              border-radius: 16px;
              padding: 2.5rem;
              text-align: center;
              color: #feca57;
            }

            .epaper-card h3 {
              color: white;
              font-size: 1.25rem;
              margin: 1rem 0 1.5rem;
            }

            .primary-btn {
              background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
              border: none;
              color: white;
              padding: 0.875rem 2rem;
              border-radius: 12px;
              font-size: 1rem;
              font-weight: 600;
              cursor: pointer;
              transition: all 0.3s ease;
              font-family: 'Poppins', sans-serif;
            }

            .primary-btn:hover {
              transform: translateY(-2px);
              box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
            }

            @media (max-width: 768px) {
              h1 { font-size: 1.5rem; }
              .subtitle { font-size: 0.875rem; }
            }
          `}} />
        </div>
      );
    }

    // --- PLACEHOLDERS FOR MISSING COMPONENTS ---
    // The following components were referenced in the main logic but not included in the snippet.
    // I have added placeholders so the app doesn't crash.
    
    function IssuedBooks({t}) { return <div className="p-4"><h2>{t.issuedBooks}</h2><p>{t.loading}</p></div>; }
    function AvailableBooks({t}) { return <div className="p-4"><h2>{t.availableBooks}</h2><p>{t.loading}</p></div>; }
    function BooksHistory({t}) { return <div className="p-4"><h2>{t.history}</h2><p>{t.loading}</p></div>; }
    function IssueBook({t}) { return <div className="p-4"><h2>{t.issueBook}</h2><p>{t.loading}</p></div>; }
    function AboutSection({t}) { return <div className="p-4"><h2>{t.about}</h2><p>{t.loading}</p></div>; }
    function ContactSection({t}) { return <div className="p-4"><h2>{t.contact}</h2><p>{t.loading}</p></div>; }
    
    function LibraryDashboard({t}) { return <div className="p-4"><h2>{t.dashboard}</h2><p>{t.loading}</p></div>; }
    function UploadEpaper({t}) { return <div className="p-4"><h2>{t.uploadEpaper}</h2><p>{t.loading}</p></div>; }
    function UploadBooks({t}) { return <div className="p-4"><h2>{t.uploadBooks}</h2><p>{t.loading}</p></div>; }
    function IssuedRecords({t}) { return <div className="p-4"><h2>{t.issuedRecords}</h2><p>{t.loading}</p></div>; }
    function EnrolledStudents({t}) { return <div className="p-4"><h2>{t.enrolledStudents}</h2><p>{t.loading}</p></div>; }
    function UpdateAbout({t}) { return <div className="p-4"><h2>{t.updateAbout}</h2><p>{t.loading}</p></div>; }
    function UploadPhotos({t}) { return <div className="p-4"><h2>{t.uploadPhotos}</h2><p>{t.loading}</p></div>; }
    function UpdateContact({t}) { return <div className="p-4"><h2>{t.updateContact}</h2><p>{t.loading}</p></div>; }

    // RENDER THE APP
    const root = createRoot(document.getElementById('root'));
    root.render(<JnanayoniLibrary />);
</script>

</body>
</html>